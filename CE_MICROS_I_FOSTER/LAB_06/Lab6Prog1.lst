E:\MICROS_1\LAB_06\Lab6Prog1.lst - generated by MGTEK Assembler ASM12 V1.26 Build 144 for WIN32 (x86) - Tue Nov 18 09:28:08 2008

    1:                                      ;************************************************************
    2:                                      ; Names:        Prof. Foster
    3:                                      ; Last Modified:08-25-2008
    4:                                      ; Purpose:      Illuminate one LED in digit 2 of the 7-segment 
    5:                                      ;               display at a time
    6:                                      ;
    7:                                      ; Inputs:       Switch SW2 - PTH pin 1
    8:                                      ;
    9:                                      ; Outputs:      7-segment diplay - PortB all pins
   10:                                      ;               digit enable       PTP pins 3-0
   11:                                      ;
   12:                                      ;************************************************************
   13:                                      
   14:                                      ;*** Constants section
   15:                                      
   16:          =00000001                   PORTB           EQU             $0001
   17:          =00000003                   DDRB            EQU             $0003
   18:          =00000260                   PTH             EQU             $0260
   19:          =00000262                   DDRH            EQU             $0262
   20:          =00000258                   PTP             EQU             $0258
   21:          =0000025A                   DDRP            EQU             $025A
   22:                                      
   23:                                      
   24:          =00002000                                   ORG             $2000
   25:                                                      ; init PortB to all outputs
   26:     2000 180B FF 0003           [04]                 MOVB    #%11111111, DDRB        
   27:                                                      ; init PTP to all outputs
   28:     2005 180B FF 025A           [04]                 MOVB    #%11111111, DDRP
   29:                                                      ; init PTH to all inputs
   30:     200A 180B 00 0262           [04]                 MOVB    #%00000000, DDRH
   31:                                                      ; begin with one LED segment illuminated
   32:     200F 180B 01 0001           [04]                 MOVB    #%00000001, PORTB       
   33:                                                      ; Enable digit 2, disable the other three
   34:     2014 180B FB 0258           [04]                 MOVB    #%11111011, PTP
   35:                                                      ; Wait for the push button SW4 to be depressed...
   36:     2019 1E 0260 02 FB          [05] NOTPUSH         BRSET   PTH,%00000010, NOTPUSH
   37:                                      ;               LDX     #$6000
   38:                                      ;DEBOUNCE       DEX
   39:                                      ;               BNE     DEBOUNCE
   40:                                                      ;.., and verify it is still depressed ~1 ms later
   41:                                      ;               BRSET   PTH,%00000010, NOTPUSH
   42:                                                      ; illuminate the next LED
   43:     201E 78 0001                [04]                 LSL     PORTB
   44:     2021 26 05                  [03]                 BNE     PUSHED
   45:     2023 180B 01 0001           [04]                 MOVB    #%00000001,PORTB
   46:     2028                             PUSHED          ; Wait for the push button SW4 to be released...
   47:                                      ;               BRCLR   PTH,%00000010, PUSHED
   48:                                                      ;LDX    #$6000
   49:                                      ;DEBOUNCE2      DEX
   50:                                      ;               BNE     DEBOUNCE2
   51:                                                      ;.., and verify it is still released ~1 ms later
   52:                                      ;               BRCLR   PTH,%00000010, NOTPUSH
   53:     2028 20 EF                  [03]                 BRA     NOTPUSH

Symbols:
ddrb                            *00000003
ddrh                            *00000262
ddrp                            *0000025a
notpush                         *00002019
portb                           *00000001
pth                             *00000260
ptp                             *00000258
pushed                          *00002028

