E:\MICROS_1\LAB_03\Lab3prg1.lst - generated by MGTEK Assembler ASM12 V1.26 Build 144 for WIN32 (x86) - Tue Oct 28 10:33:20 2008

    1:                                      ;************************************************************
    2:                                      ; Names:        Prof. Foster
    3:                                      ; Last Modified:08-04-2008
    4:                                      ; Purpose:      Add a list of unsigned, one-byte values as a 
    5:                                      ;               two-byte sum, and indicate unsigned overflow
    6:                                      ;
    7:                                      ; Inputs:       Address of the array, locations 1030h-1031h
    8:                                      ;               Length of the array, one-byte, location 1032h
    9:                                      ;
   10:                                      ; Outputs:      Unsigned overflow, 00h for false, FFh for true
   11:                                      ;               location 1050h
   12:                                      ;               Two-byte sum, location 1051h-1052h
   13:                                      ;
   14:                                      ;
   15:                                      ;************************************************************
   16:                                      
   17:                                      ;*** Constants section
   18:          =000000FF                   true    equ     $ff             ; define arbirary value for true
   19:          =00000000                   false   equ     $00             ; define arbirary value for false
   20:                                      
   21:                                      
   22:                                      ;*** Variables and I/O section
   23:                                      ; declare inputs
   24:          =00001030                           org     1030h
   25:     1030 3000                        array   dc.w    3000h           ; input:starting address of table
   26:     1032 05                          length  dc.b    05h                     ; input:length of table
   27:                                      
   28:                                      
   29:                                      ; declare outputs
   30:          =00001050                           org     1050h
   31:     1050 +0001                       ovflow  ds.b    1               ; output: unsigned overflow
   32:     1051 +0002                       sum     ds.w    1               ; output: two-byte sum
   33:                                      
   34:                                      ; declare internal variables
   35:          =00003000                           org 3000h
   36:     3000 3A 5E FE 8B 56                              dc.b $3A,$5E,$FE,$8B,$56
   37:                                      
   38:                                      ;*** Program section
   39:          =00002000                           org     2000h
   40:     2000 1803 0000 1051         [05]         movw    #0,sum          ; Initialize sum to 0
   41:     2006 180B 00 1050           [04]         movb    #false,ovflow   ; initialze overflow to "false"
   42:     200B FE 1030                [03]         ldx     array           ; Point to the first element of the array
   43:     200E B6 1032                [03]         ldaa    length          ; make a working copy of the length
   44:     2011 B7 06                  [01]         tfr     A,Y
   45:     2013 27 14                  [03] loop    beq     done            ; go to end if there are no more elements
   46:     2015 87                     [01]         clra                    ; load next element and extend to 2 bytes
   47:     2016 E6 00                  [03]         ldab    0,X             ; and element to the running sum
   48:     2018 F3 1051                [03]         addd    sum     
   49:     201B 7C 1051                [03]         std     sum
   50:     201E 24 05                  [03]         bcc     sum_ok          ; indicate overflow if this operation
   51:     2020 180B FF 1050           [04]         movb    #true,ovflow    ; generated an invalid answer
   52:     2025 08                     [01] sum_ok  inx                     ; point to next element
   53:     2026 03                     [01]         dey                     ; decrement number of elements remaining
   54:     2027 20 EA                  [03]         bra     loop
   55:     2029 3F                     [09] done    swi

Symbols:
array                           *00001030
done                            *00002029
false                           *00000000
length                          *00001032
loop                            *00002013
ovflow                          *00001050
sum                             *00001051
sum_ok                          *00002025
true                            *000000ff

